use actix_web::{web, get, HttpResponse, http::header::ContentEncoding};

#[get("/already_compressed_body")]
async fn index() -> HttpResponse {
    static HELLO_WORLD: &[u8] = &[
        0x1f, 0x8b, 0x08, 0x00, 0xa2, 0x30, 0x10, 0x5c, 0x00, 0x03, 0xcb, 0x48, 0xcd, 0xc9, 0xc9,
        0x57, 0x28, 0xcf, 0x2f, 0xca, 0x49, 0xe1, 0x02, 0x00, 0x2d, 0x3b, 0x08, 0xaf, 0x0c, 0x00,
        0x00, 0x00,
    ];

    HttpResponse::Ok()
        .insert_header(ContentEncoding::Gzip)
        .body(HELLO_WORLD)
}

pub fn scoped_already_compressed_body(cfg: &mut web::ServiceConfig) {
    cfg.service(index);
}
